app:
  runtime:
    name: nodejs20.x
  id: ari:cloud:ecosystem::app/b6b2bb9c-f771-430d-a7f1-06faa6b834be

modules:
  jira:issuePanel:
    - key: ac-writer-panel
      title: AC Writer
      icon: https://developer.atlassian.com/platform/forge/images/icons/issue-panel-icon.svg
      resource: main
      resolver:
        function: resolver

  function:
    - key: resolver
      handler: index.handler
    - key: generateCriteriaAction
      handler: index.generateCriteriaForRovo

  rovo:agent:
    - key: ac-writer-agent
      name: AC Writer Assistant
      description: Generates Gherkin-format acceptance criteria for Jira tickets
      prompt: |
        You are an expert Business Analyst specializing in writing clear, testable acceptance criteria in Gherkin format.
        When a user asks you to generate acceptance criteria, use the generate-criteria action.
        Present the criteria clearly and offer to regenerate if needed.
      conversationStarters:
        - Generate acceptance criteria for this ticket
        - Create Gherkin scenarios with edge cases
      actions:
        - generate-criteria

  action:
    - key: generate-criteria
      name: Generate Acceptance Criteria
      function: generateCriteriaAction
      description: Generates Gherkin-format acceptance criteria based on ticket information
      inputs:
        template:
          title: Template
          type: string
          description: Template to use (auto, Login/Authentication, CRUD Operations, Payment Processing, Search & Filter, Form Validation)
          required: false
      actionVerb: GET

resources:
  - key: main
    path: src/frontend

permissions:
  scopes:
    - read:jira-work
    - write:jira-work
    - storage:app
